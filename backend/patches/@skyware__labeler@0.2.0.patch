diff --git a/dist/LabelerServer.js b/dist/LabelerServer.js
index 5e57c5912c17427740c987c8cc72030452588094..b00f9f809a2c980af3406746092472ae60ff7247 100644
--- a/dist/LabelerServer.js
+++ b/dist/LabelerServer.js
@@ -1,8 +1,8 @@
 import "@atcute/ozone/lexicons";
 import { XRPCError } from "@atcute/client";
-import { fastifyWebsocket } from "@fastify/websocket";
 import { createClient } from "@libsql/client";
-import fastify from "fastify";
+import websocket from "@fastify/websocket";
+import Fastify from "fastify";
 import { parsePrivateKey, verifyJwt } from "./util/crypto.js";
 import { formatLabel, labelIsSigned, signLabel } from "./util/labels.js";
 import { excludeNullish, frameToBytes } from "./util/util.js";
@@ -55,15 +55,24 @@ export class LabelerServer {
             this.db = createClient({ url: "file:" + (options.dbPath ?? "labels.db") });
         }
         this.dbInitLock = this.initializeDatabase();
-        this.app = fastify();
-        void this.app.register(fastifyWebsocket).then(() => {
+        this.app = Fastify();
+
+        (async () => {
+            await this.app.register(websocket);
+
+            // WebSocket route MUST be registered before wildcard
+            this.app.get(
+                "/xrpc/com.atproto.label.subscribeLabels",
+                { websocket: true },
+                this.subscribeLabelsHandler,
+            );
+
             this.app.get("/xrpc/com.atproto.label.queryLabels", this.queryLabelsHandler);
             this.app.post("/xrpc/tools.ozone.moderation.emitEvent", this.emitEventHandler);
-            this.app.get("/xrpc/com.atproto.label.subscribeLabels", { websocket: true }, this.subscribeLabelsHandler);
             this.app.get("/xrpc/_health", this.healthHandler);
             this.app.get("/xrpc/*", this.unknownMethodHandler);
             this.app.setErrorHandler(this.errorHandler);
-        });
+        })();
     }
     /**
      * Initializes the database with the required schema.
@@ -74,25 +83,31 @@ export class LabelerServer {
             console.warn("Unable to set WAL mode â€” performance and concurrent access may be impacted.");
         });
         await this.db.execute(`
-			CREATE TABLE IF NOT EXISTS labels (
-				id INTEGER PRIMARY KEY AUTOINCREMENT,
-				src TEXT NOT NULL,
-				uri TEXT NOT NULL,
-				cid TEXT,
-				val TEXT NOT NULL,
-				neg BOOLEAN DEFAULT FALSE,
-				cts DATETIME NOT NULL,
-				exp DATETIME,
-				sig BLOB
-			);
-		`).catch((error) => {
+            CREATE TABLE IF NOT EXISTS labels (
+                id INTEGER PRIMARY KEY AUTOINCREMENT,
+                src TEXT NOT NULL,
+                uri TEXT NOT NULL,
+                cid TEXT,
+                val TEXT NOT NULL,
+                neg BOOLEAN DEFAULT FALSE,
+                cts DATETIME NOT NULL,
+                exp DATETIME,
+                sig BLOB
+            );
+        `).catch((error) => {
             console.error("Failed to initialize database:", error);
             throw error;
         });
     }
     start(portOrOptions, callback = () => { }) {
         if (typeof portOrOptions === "number") {
-            this.app.listen({ port: portOrOptions }, callback);
+            this.app.listen(
+                {
+                    port: portOrOptions,
+                    host: "0.0.0.0",
+                },
+                callback,
+            );
         }
         else {
             this.app.listen(portOrOptions, callback);
@@ -122,10 +137,10 @@ export class LabelerServer {
         const signed = labelIsSigned(label) ? label : signLabel(label, this.#signingKey);
         const { src, uri, cid, val, neg, cts, exp, sig } = signed;
         const sql = `
-    		INSERT INTO labels (src, uri, cid, val, neg, cts, exp, sig)
-    		VALUES (?, ?, ?, ?, ?, ?, ?, ?)
-    		RETURNING id
-		`;
+            INSERT INTO labels (src, uri, cid, val, neg, cts, exp, sig)
+            VALUES (?, ?, ?, ?, ?, ?, ?, ?)
+            RETURNING id
+        `;
         const args = [src, uri, cid || null, val, neg ? 1 : 0, cts, exp || null, sig];
         const result = await this.db.execute({ sql, args });
         if (!result.rows.length)
@@ -275,11 +290,11 @@ export class LabelerServer {
         const whereClause = conditions.length ? `WHERE ${conditions.join(" AND ")}` : "";
         const result = await this.db.execute({
             sql: `
-				SELECT * FROM labels
-				${whereClause}
-				ORDER BY id ASC
-				LIMIT ?
-			`,
+                SELECT * FROM labels
+                ${whereClause}
+                ORDER BY id ASC
+                LIMIT ?
+            `,
             args: params,
         });
         const rows = result.rows.map((row) => ({
@@ -319,10 +334,10 @@ export class LabelerServer {
             try {
                 const result = await this.db.execute({
                     sql: `
-						SELECT * FROM labels
-						WHERE id > ?
-						ORDER BY id ASC
-					`,
+                        SELECT * FROM labels
+                        WHERE id > ?
+                        ORDER BY id ASC
+                    `,
                     args: [cursor],
                 });
                 for (const row of result.rows) {
@@ -468,3 +483,4 @@ export class LabelerServer {
         }
     }
 }
+
